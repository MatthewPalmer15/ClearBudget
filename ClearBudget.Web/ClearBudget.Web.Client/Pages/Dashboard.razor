@page "/dashboard"
@inherits CustomClientComponent
@using ClearBudget.Application.Dashboard.Models
@inject HttpClient Http

<PageTitle>Money Management</PageTitle>

<div class="container py-4">
    <h1 class="mb-2">My Money Management Dashboard</h1>
    <p class="text-muted mb-4">Track your accounts and earnings at a glance</p>

    @if (Model == null)
    {
        <div class="text-center py-5">
            <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
            <p class="mt-3"><em>Loading dashboard...</em></p>
        </div>
    }
    else
    {
        <div class="row g-4">
            <div class="col-lg-8">
                <h4 class="mb-3">Accounts</h4>
                <div class="row g-3">
                    @foreach (var account in Model.accounts)
                    {
                        <div class="col-md-6 col-xl-4">
                            <div class="card h-100 border-0 shadow-sm">
                                <div class="card-body">
                                    <h5 class="card-title fw-semibold">@account.Title</h5>
                                    <ul class="list-unstyled mb-0">
                                        <li><strong>Gross Money:</strong> @account.GrossAmount.ToString("C")</li>
                                        <li><strong>Interest Rate:</strong> @account.InterestRate.ToString("F2")%</li>
                                        <li><strong>Earnings:</strong> @account.InterestAmount.ToString("C")</li>
                                        <li><strong>Net:</strong> @account.NetAmount.ToString("C")</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    }
                </div>
            </div>

            <!-- My Money Overview -->
            <div class="col-lg-4">
                <h4 class="mb-3">My Money</h4>
                <div class="d-flex flex-column gap-3">
                    <div class="card shadow-sm border-0 p-3">
                        <div class="d-flex align-items-center">
                            <i class="bi bi-bank fs-3 text-primary me-3"></i>
                            <div>
                                <small class="text-muted">Total Right Now</small>
                                <div class="fw-bold fs-5">@Model.accountOverview.Total.ToString("C")</div>
                            </div>
                        </div>
                    </div>
                    <div class="card shadow-sm border-0 p-3">
                        <div class="d-flex align-items-center">
                            <i class="bi bi-calendar fs-3 text-success me-3"></i>
                            <div>
                                <small class="text-muted">Net (1 Year)</small>
                                <div class="fw-bold fs-5">@Model.accountOverview.FutureTotal.ToString("C")</div>
                            </div>
                        </div>
                    </div>
                    <div class="card shadow-sm border-0 p-3">
                        <div class="d-flex align-items-center">
                            <i class="bi bi-bar-chart fs-3 text-warning me-3"></i>
                            <div>
                                <small class="text-muted">Net Plus Work</small>
                                <div class="fw-bold fs-5">@((Model.accountOverview.FutureTotal + 10000).ToString("C"))</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    }
</div>
